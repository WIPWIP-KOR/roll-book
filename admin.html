<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>관리자 페이지 - 풋살 동호회</title>
    <link rel="stylesheet" href="css/style.css">
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ba33aab3a17f53b23105c96b7618df35&libraries=services"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚽ 관리자 페이지</h1>
        </div>

        <div class="admin-section">
            <h2>📍 출석 위치 설정</h2>

            <div class="map-search-section">
                <h3>🗺️ 지도에서 위치 검색</h3>
                <div class="form-group">
                    <label for="mapSearch">장소 검색</label>
                    <div class="search-container">
                        <input type="text" id="mapSearch" placeholder="예: 올림픽공원 풋살장" onkeypress="if(event.keyCode===13) searchPlaces();">
                        <button id="searchBtn" class="btn-search" onclick="searchPlaces();">검색</button>
                    </div>
                </div>

                <div id="map" class="kakao-map"></div>

                <div class="map-help">
                    💡 지도를 클릭하거나 검색 결과를 클릭하면 위치가 자동으로 입력됩니다.
                </div>

                <div id="searchResults" class="search-results"></div>
            </div>

            <div class="manual-input-section">
                <h3>✏️ 수동 입력</h3>
                <div class="form-group">
                    <label for="latitude">위도 (Latitude)</label>
                    <input type="number" id="latitude" step="0.000001" placeholder="예: 37.5665" readonly>
                </div>
                <div class="form-group">
                    <label for="longitude">경도 (Longitude)</label>
                    <input type="number" id="longitude" step="0.000001" placeholder="예: 126.9780" readonly>
                </div>
                <div class="form-group">
                    <label for="locationName">장소 이름</label>
                    <input type="text" id="locationName" placeholder="예: 서울 풋살장">
                </div>
                <button id="saveLocationBtn" class="btn-primary">위치 저장</button>
                <div id="locationMessage" class="message"></div>

                <div class="info-box">
                    <p><strong>현재 설정된 위치:</strong></p>
                    <p id="currentLocation">위치 정보를 불러오는 중...</p>
                </div>

                <button id="getMyLocationBtn" class="btn-secondary">내 현재 위치 가져오기</button>
            </div>
        </div>

        <div class="admin-section">
            <h2>📱 QR 코드 생성</h2>
            <div class="form-group">
                <label for="attendanceUrl">출석 URL</label>
                <input type="text" id="attendanceUrl" readonly>
            </div>
            <button id="generateQRBtn" class="btn-primary">QR 코드 생성</button>
            <div id="qrcode" class="qr-container"></div>
            <button id="downloadQRBtn" class="btn-secondary" style="display:none;">QR 코드 다운로드</button>
        </div>

        <div class="admin-section">
            <h2>📊 오늘 출석 현황</h2>
            <button id="refreshTodayBtn" class="btn-secondary">새로고침</button>
            <div id="todayAttendance" class="attendance-list">
                <p>데이터를 불러오는 중...</p>
            </div>
        </div>

        <div class="admin-section">
            <h2>👥 전체 회원 목록</h2>
            <button id="refreshMembersBtn" class="btn-secondary">새로고침</button>
            <div id="membersList" class="members-list">
                <p>데이터를 불러오는 중...</p>
            </div>
        </div>

        <div class="stats-section">
            <h2>🔑 관리자 비밀번호 설정</h2>
            <div class="password-group">
                <label for="newPassword">새 4자리 비밀번호:</label>
                <input type="password" id="newPassword" maxlength="4" placeholder="4자리 숫자" pattern="[0-9]{4}">
                <button id="setPasswordBtn" class="btn-secondary">비밀번호 저장</button>
            </div>
            <p id="passwordMessage" class="message-area"></p>
        </div>

        <div class="footer">
            <a href="index.html" class="link">출석 페이지로</a> |
            <a href="stats.html" class="link">통계 보기</a>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>